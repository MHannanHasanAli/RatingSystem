@model RatingSystem.ViewModels.RatingViewModel
@{
    ViewBag.Title = "Rating";
}

<style>
    .table th, .table td {
        padding: 0.5rem 0.9375rem;
        vertical-align: top;
        border-top: 1px solid #f3f3f3;
    }
    .rating-box {
        padding: 25px 37px;
        border-radius: 25px;
        text-align: center;
    }

        .rating-box h3 {
            font-size: 22px;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .rating-box .stars {
            display: flex;
            align-items: center;
            gap: 5px;
            width: 0px;
        }

    .stars i {
        font-size: 45px;
        color: #b5b8b1;
        transition: all 0.2s;
        cursor: pointer;
    }

        .stars i.active {
            color: #ffb851;
            transform: scale(1.2);
        }
</style>
<section id="rating">
    <div class="row">
        <div class="col-md-4">
            <img style="height:100px" class="img-fluid" src="~/Content/ratingsystemtemplate/Epsa.jpg" />
        </div>
        <div class="col-md-8">
                <div class="col">
                    <h3 class="text-center">We Appreciate your feedback<br />(Annonymous)</h3>
                </div>
        </div>

    </div>
    <div class="container-fluid">
      
              <div class="row">

                  <div class="col-md-12">
                      <form id="actionForm">
                          <input type="hidden" name="Employee" value="@Model.EmployeeFull.Name" id="Employee" />
                          <input type="hidden" name="TeamName" value="@Model.EmployeeFull.TeamName" id="TeamName" />
                          <table class="table  table-borderless">
                              <tr>
                                  <td>
                                      <h3>Customer Service</h3>
                                  </td>
                                  <td>
                                      <div id="@Model.EmployeeFull.ID" class="rating-box">
                                          <div id="CustomerServiceStars" class="stars">
                                              <i class="fa-solid fa-star"></i>
                                              <i class="fa-solid fa-star"></i>
                                              <i class="fa-solid fa-star"></i>
                                              <i class="fa-solid fa-star"></i>
                                              <i class="fa-solid fa-star"></i>

                                              <input type="hidden" name="CustomerService" id="CustomerService" />
                                          </div>
                                      </div>
                                  </td>
                              </tr>
                              <tr>
                                  <td>
                                      <h3>Professionalism</h3>
                                  </td>
                                  <td>
                                      <div id="ProfessionalismStars" class="rating-box">
                                          <div class="stars">
                                              <i class="fa-solid fa-star"></i>
                                              <i class="fa-solid fa-star"></i>
                                              <i class="fa-solid fa-star"></i>
                                              <i class="fa-solid fa-star"></i>
                                              <i class="fa-solid fa-star"></i>

                                              <input type="hidden" name="Professionalism" id="Professionalism" />
                                          </div>
                                      </div>
                                  </td>
                              </tr>
                              <tr>
                                  <td>
                                      <h3> Expertise</h3>
                                  </td>
                                  <td>
                                      <div class="rating-box">
                                          <div id="ExpertiseStars" class="stars">
                                              <i class="fa-solid fa-star"></i>
                                              <i class="fa-solid fa-star"></i>
                                              <i class="fa-solid fa-star"></i>
                                              <i class="fa-solid fa-star"></i>
                                              <i class="fa-solid fa-star"></i>

                                              <input type="hidden" name="Expertise" id="Expertise" />
                                          </div>
                                      </div>
                                  </td>
                              </tr>
                          </table>
                          <hr />


                          <button type="button" class="btn btn-block btn-primary" id="actionBtn">SUBMIT</button>


                      </form>
                  </div>
              
                  

              </div>
    </div>
</section>


<script>
    $('#CustomerServiceStars i').on('click', function () {
        // Remove the active class from all stars
        $(this).siblings().removeClass('active');

        // Add the active class to the clicked star and all previous siblings
        $(this).addClass('active');
        $(this).prevAll().addClass('active');

        // Get the index of the clicked star (starting from 0)
        var index = $(this).index();
        //var containerId = $(this).closest('.rating-box').attr('id');

        // Log the selected rating
        //console.log(index + 1);
        var Rating = index + 1;

        $("#CustomerService").val(Rating);
    });

    $('#ProfessionalismStars i').on('click', function () {
        // Remove the active class from all stars
        $(this).siblings().removeClass('active');

        // Add the active class to the clicked star and all previous siblings
        $(this).addClass('active');
        $(this).prevAll().addClass('active');

        // Get the index of the clicked star (starting from 0)
        var index = $(this).index();
        //var containerId = $(this).closest('.rating-box').attr('id');

        // Log the selected rating
        //console.log(index + 1);
        var Rating = index + 1;

        $("#Professionalism").val(Rating);
    });

    $('#ExpertiseStars i').on('click', function () {
        // Remove the active class from all stars
        $(this).siblings().removeClass('active');

        // Add the active class to the clicked star and all previous siblings
        $(this).addClass('active');
        $(this).prevAll().addClass('active');

        // Get the index of the clicked star (starting from 0)
        var index = $(this).index();
        //var containerId = $(this).closest('.rating-box').attr('id');

        // Log the selected rating
        //console.log(index + 1);
        var Rating = index + 1;

        $("#Expertise").val(Rating);
    });


    $("#actionBtn").click(function () {
        $.ajax({
            url: '@Url.Action("Rating", "Home")',
            type: "post",
            data: $("#actionForm").serialize()
        })
            .done(function () {
                window.location.href = '@Url.Action("Thankyou","Home")';
            });
	});
</script>
